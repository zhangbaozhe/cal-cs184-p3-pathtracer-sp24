<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<style>
  body {
    padding: 0px;
    width: 100%;
    max-width: 1000px;
    margin-right: auto;
    margin-left: auto;
    border-collapse: separate;
    text-align: left;
    font-weight: 300;
    font-family: 'Open Sans', sans-serif;
    color: #121212;
  }
  h1, h2, h3, h4 {
    font-family: 'Source Sans Pro', sans-serif;
  }
  pre {
    white-space: pre-wrap;
    background: hsl(30,80%,90%);
  }
  code {
    background: rgb(137, 132, 186);
  }
</style>
<title>Computer Graphics Path Tracer</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link href="https://fonts.googleapis.com/css?family=Open+Sans|Source+Sans+Pro" rel="stylesheet">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/contrib/auto-render.min.js"></script>
</head>


<body>



<h1 align="middle">Computer Graphics, Spring 2024</h1>
<h1 align="middle">Path Tracer</h1>
<h2 align="middle">Baozhe ZHANG</h2>

<br><br>

<div>

<h2 align="middle">Overview</h2>
<p>
  In this assignment, the task is to achieve a path tracer for rendering images of 3D scenes. The path tracer is implemented in C++ and is able to render images of 3D scenes with various materials, lighting, and camera configurations. The path tracer in implemented in several parts, each building on the previous part. 
  <ul>
    <li>Part 1: Ray Generation and Scene Intersection</li>
    <li>Part 2: Bounding Volume Hierarchy</li>
    <li>Part 3: </li>
    <li>Part 4: </li>
    <li>Part 5: </li>
  </ul>
  
</p>

<h2 align="middle">Part I: Ray Generation and Scene Intersection</h2>
<p>
  In this part, the task is to implement the ray generation and scene intersection. The ray generation is implemented in the <code>Camera</code> class, which generates rays for each pixel in the image plane. The scene intersection is implemented in the <code>Triangle</code> and <code>Sphere</code> classes, which check for intersections between rays and scene objects. The scene objects are represented as <code>Primitive</code> objects, which can be spheres, triangles, or other shapes. The intersection tests are implemented for spheres and triangles. The ray generation and scene intersection are tested with a simple scene containing spheres and triangles. The images rendered by the path tracer are shown below.
</p>

<div align="middle">
  <table style="width:100%">
    <tr align="center">
      <td>
        <img src="images/part1_CBspheres_screenshot_4-3_17-3-28.png" align="middle" width="400px"/>
        <figcaption><b>Figure 1a:</b> CBspheres</figcaption>
      </td>
      <td>
        <img src="images/part1_banana_screenshot_4-3_17-4-24.png" align="middle" width="400px"/>
        <figcaption><b>Figure 1b:</b> Banana</figcaption>
      </td>
    </tr>
    <tr align="center">
      <td>
        <img src="images/part1_cow_screenshot_4-3_17-0-9.png" align="middle" width="400px"/>
        <figcaption><b>Figure 1c:</b> Cow</figcaption>
      </td>
      <td>
        <img src="images/part1_beetle_screenshot_4-3_17-2-30.png" align="middle" width="400px"/>
        <figcaption><b>Figure 1d:</b> Beetle</figcaption>
      </td>
    </tr>
  </table>
</div>
<br>

<p>
  As for the triangle intersection algorithm, the Möller-Trumbore algorithm<sup><a href="https://en.wikipedia.org/wiki/M%C3%B6ller%E2%80%93Trumbore_intersection_algorithm">[1]</a></sup> is used to calculate the intersection between a ray and a triangle. 

  The Möller-Trumbore algorithm is a fast ray-triangle intersection algorithm that is widely used in computer graphics. The algorithm describes a method for calculating the intersection between a ray and a triangle in 3D space. It is based on the idea of finding the intersection point between the ray and the plane of the triangle, and then checking if the intersection point is inside the triangle. 

  It first check if the ray is parallel to the triangle, if so, return false. Assume the triangle's three vertices are $v_1$, $v_2$, and $v_3$. The ray is $O + t D$. Using the barycentric coordinate, if there is an intersection with the plane of the triangle, the intersection point can be represented as $P = O + t D = v_1 + u (v_2 - v_1) + v (v_3 - v_1)$. The Möller-Trumbore algorithm calculates the barycentric coordinates $u$ and $v$ by solving the following equations:
  $$
  \begin{bmatrix}
    \vert & \vert & \vert \\
    -D & v_2 - v_1 & v_3 - v_1 \\
    \vert & \vert & \vert
  \end{bmatrix}
  \begin{bmatrix}
  t \\ u \\ v
  \end{bmatrix}
   = O - v_1
  $$
  If $u \geq 0$, $v \geq 0$, and $u + v \leq 1$, then the intersection point is inside the triangle.
</p>

<h2 align="middle">Part II: Bounding Volume Hierarchy</h2>

<p>
  Without BVH implemented, rendering the cow mesh using the following command on my computer (AMD Ryzen 5 5600H) uses about 30 seconds.
  <pre>
    ./pathtracer -t 8 -r 800 600 -f cow.png ../dae/meshedit/cow.dae
  </pre>
</p>




<script>
  renderMathInElement(
    document.body,
    {
      delimiters: [
        { left: "$$", right: "$$", display: true },
        { left: "\\[", right: "\\]", display: true },
        { left: "$", right: "$", display: false },
        { left: "\\(", right: "\\)", display: false }
      ]
    }
  );
</script>
</body>
</html>